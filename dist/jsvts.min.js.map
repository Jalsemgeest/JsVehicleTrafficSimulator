{"version":3,"file":"jsvts.min.js","sources":["../js/jsvts.js","../js/helpers/utils.js","../js/clock.js","../js/map.js","../js/plotter.js","../js/txtToMapParser.js","../js/objects/movable.js","../js/objects/renderable.js","../js/objects/segment.js","../js/objects/vehicle.js","../js/objects/tempVehicle.js","../js/objects/trafficFlowControl.js","../js/objects/stopLight.js","../js/objects/vehicleGenerator.js"],"names":["JSVTS","ID_COUNT","CRASH_CLEANUP_MAX_DELAY","CRASH_CLEANUP_MIN_DELAY","startTime","elapsed","realtime","keepMoving","totalElapsedTime","roadways","defaultRoadway","timeStep","init","initPageElements","initObjects","onLoadComplete","reset","Plotter","Map","resize","dims","getWidthHeight","width","height","docWidth","docHeight","render","loadRoadway","w","window","d","document","e","documentElement","b","querySelector","x","innerWidth","clientWidth","y","innerHeight","clientHeight","toggleAnimationState","stop","start","move","getMovables","forEach","mov","update","requestAnimationFrame","index","jsonObj","TxtToMapParser","parseMapJson","map","Utils","getRandomBetween","min","max","Math","random","getDistanceBetweenTwoPoints","p1","p2","THREE","Line3","Vector3","copy","distance","angleFormedBy","line1","line2","a","end","sub","normalize","acos","dot","PI","isCollidingWith","box1","box2","isIntersectionBox","convertKmphToMps","kilometersPerHour","result","SECONDS_PER_HOUR","METERS_PER_KILOMETER","convertMpsToKmph","metersPerSecond","Clock","options","this","domElement","Date","getTime","elapsedMs","prototype","createElement","id","style","cssText","elapsedDiv","appendChild","simulationTimeDiv","realTimeDiv","step","innerHTML","convertMsToHumanReadable","milliseconds","seconds","parseFloat","round","toFixed","minutes","floor","hours","elapsedReadable","_movables","up","addMovable","movable","Movable","addRenderable","removeMovable","removeRenderable","filter","m","getMovableById","getMovableByType","type","updateMovables","movables","i","getTypesInRangeOf","origin","config","location","getTypesInRangeOfOnSegment","segmentId","segment","getSegments","Segment","getSegmentsStartingAt","point","seg","z","getAvailableSegmentsContainingPoint","segments","allSegments","push","j","laneChangePoints","changePoint","getSimilarSegmentsInRoad","currentSegment","results","name","abs","getTypesInSegment","getTypesNotInSegment","getVehicles","Vehicle","getVehiclesInSegment","getVehiclesNotInSegment","getTfcsInSegment","TrafficFlowControl","renderer","scene","camera","controls","stats","clock","light","initRenderer","initCamera","initControls","initLight","initStats","initClock","initScene","initDom","WebGLRenderer","pointLight","PointLight","position","VIEW_ANGLE","ASPECT","NEAR","FAR","PerspectiveCamera","lookAt","Stats","top","right","OrbitControls","damping","addEventListener","sceneObjects","Scene","add","AxisHelper","obj","domObjects","removeChild","setSize","aspect","updateProjectionMatrix","renderable","Renderable","mesh","remove","dispose","parseSegmentsJson","length","speedLimit","undefined","speedlimit","roadname","isInlet","isinlet","isMergeLane","ismergelane","parseTfcJson","tfc","parseGeneratorJson","generator","greenDuration","greenduration","redDuration","redduration","startState","startstate","yellowDuration","yellowduration","StopLight","attachMovable","VehicleGenerator","delay","MOVABLE_OPTIONS","self","generateId","property","moveTo","call","material","texture","generateMesh","Object","create","constructor","updated","updateMatrix","set","moveBy","isNaN","translateZ","geometry","SEG_OPTIONS","defaults","key","tangent","axis","radians","generateLaneChangePoints","spline","SplineCurve3","LineBasicMaterial","color","Geometry","vertices","getPoints","line","Line","getTangent","crossVectors","identity","text","TextGeometry","size","tMesh","Mesh","pt","getPoint","rotateY","translateY","SphereGeometry","pointMat","MeshBasicMaterial","sphere","spacing","getLength","VEH_OPTIONS","reactionTime","acceleration","deceleration","changeLaneDelay","isChangingLanes","changeLaneTime","velocity","crashed","crashCleanupTime","getLookAheadDistance","mps","distanceToStop","pow","distanceToReact","distanceTot","BoxGeometry","wireframe","IsStopping","elapsedSeconds","removed","shouldStop","updateVelocity","distTraveled","remainingDistOnSegment","nextSegments","randIndex","nextSeg","brake","console","log","rand","isStopping","accelerate","setHex","getBoundingBox","computeBoundingBox","boundingBox","skipCollisionCheck","dist","foundV","shouldStopForVehicle","Box3","setFromObject","vehicle","changingLanes","changeLanesIfAvailable","foundTfc","shouldStopForTfc","foundCorner","shouldSlowForCorner","Number","vehicles","v","hasInView","connectedTo","containing","distToSegEnd","found","s","tmpV","TempVehicle","copyFrom","tfcs","closestPoint","possibleLanes","possibleLane","angle","distanceToSegEnd","headingDiff","nextSegment","tmp","corneringSpeed","corneringSpeedCalculator","heading","headingDifference","maxAngle","applyMatrix4","matrix","headingLine","headingToLocation","TVEH_OPTIONS","TFC_ID_COUNT","StopLightState","GREEN","YELLOW","RED","STOPLIGHT_OPTIONS","radius","currentState","stateElapsed","distanceToV","VG_OPTIONS","nextVehicle","generate","prepareNewVehicle","canGenerate","newVehicle"],"mappings":"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"}