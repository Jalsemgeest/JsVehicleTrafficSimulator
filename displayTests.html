<!--
/**********************************************************************
 * This javascript is part of a Vehicle Traffic Simulator written 
 * entirely in Javascript, HTML and CSS.  The application allows for 
 * the creation of roadways upon which vehicles will travel and
 * attempt to avoid collisions with other vehicles while obeying the
 * rules of the road including traffic lights and speed limits
 * 
 * @Created: 04/09/2013
 * @Author: Jason Holt Smith (bicarbon8@gmail.com)
 * @Version: 0.2.0
 * Copyright (c) 2013 Jason Holt Smith. JsVehicleTrafficSimulator is 
 * distributed under the terms of the GNU General Public License.
 * 
 * This file is part of JsVehicleTrafficSimulator.
 * 
 * JsVehicleTrafficSimulator is free software: you can redistribute it 
 * and/or modify it under the terms of the GNU General Public License 
 * as published by the Free Software Foundation, either version 3 of 
 * the License, or (at your option) any later version.
 * 
 * JsVehicleTrafficSimulator is distributed in the hope that it will 
 * be useful, but WITHOUT ANY WARRANTY; without even the implied 
 * warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  
 * See the GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with JsVehicleTrafficSimulator.  If not, see 
 * <http://www.gnu.org/licenses/>.
 **********************************************************************/
-->
<html>
    <head>
        <script type="text/javascript" src="Point.js"></script>
        <script type="text/javascript" src="Rectangle.js"></script>
        <script type="text/javascript" src="Triangle.js"></script>
        <script type="text/javascript" src="Lane.js"></script>
        <script type="text/javascript" src="Segment.js"></script>
        <script type="text/javascript" src="TrafficFlowControl.js"></script>
        <script type="text/javascript" src="StopLight.js"></script>
        <script type="text/javascript" src="Driver.js"></script>
        <script type="text/javascript" src="Map.js"></script>
        <script type="text/javascript" src="Road.js"></script>
        <script type="text/javascript" src="Vehicle.js"></script>
        <script type="text/javascript" src="Mover.js"></script>
        <script type="text/javascript">
            function RunTests(){
                var cvs=document.getElementById("canvas");
                var ctx=cvs.getContext("2d");
                var rect=new Rectangle(10,6);
                rect.MoveTo(new Point(100,100));
                var triP0=rect.GetCenterPoint();
                var triP1=new Point(triP0.X,triP0.Y);
                triP1.MoveBy(new Point(rect.Width,-rect.Height));
                var triP2=new Point(triP0.X,triP0.Y);
                triP2.MoveBy(new Point(rect.Width,rect.Height));
                var tri=new Triangle(triP0,triP1,triP2);
                DrawShape(ctx,tri,"#00ff00",null,1,true,1);
                DrawShape(ctx,rect,"#ff0000",null,1,true,1);
            }
            
            function DrawPoint(ctx,center,radius,fillColor,edgeColor,edgeThickness,scale){
                if(center!='undefined' && center!=null){
                    var drawEdge=false;
                    var drawFill=false;
                    var shapeScale=1;
                    if(fillColor!='undefined' && fillColor!=null){
                        ctx.fillStyle=fillColor;
                        drawFill=true;
                    }
                    if(edgeColor!='undefined' && edgeColor!=null){
                        ctx.strokeStyle=edgeColor;
                        drawEdge=true;
                    }
                    if(edgeThickness!='undefined' && edgeThickness!=null){
                        ctx.lineWidth=edgeThickness;
                        drawEdge=true;
                    }
                    if(scale!='undefined' && scale!=null){
                        shapeScale=scale;
                    }
                    ctx.beginPath();
                    ctx.arc(center.X,center.Y,radius,0,Math.PI*2,true);
                    if(drawFill){
                        ctx.fill();
                    }
                    if(drawEdge){
                        ctx.stroke();
                    }
                }
            }
            
            function DrawShape(ctx,shape,fillColor,edgeColor,edgeThickness,close,scale){
                if(shape!='undefined' && shape!=null){
                    var drawEdge=false;
                    var drawFill=false;
                    var shapeScale=1;
                    if(fillColor!='undefined' && fillColor!=null){
                        ctx.fillStyle=fillColor;
                        drawFill=true;
                    }
                    if(edgeColor!='undefined' && edgeColor!=null){
                        ctx.strokeStyle=edgeColor;
                        drawEdge=true;
                    }
                    if(edgeThickness!='undefined' && edgeThickness!=null){
                        ctx.lineWidth=edgeThickness;
                        drawEdge=true;
                    }
                    if(scale!='undefined' && scale!=null){
                        shapeScale=scale;
                    }
                    
                    // ensure we have more than just a line
                    if(shape.Points.length>1){
                        ctx.lineJoin='round';
                        ctx.beginPath();
                        ctx.moveTo(shape.Points[0].X*shapeScale,shape.Points[0].Y*shapeScale);
                        for(var i=1;i<shape.Points.length;i++){
                            ctx.lineTo(shape.Points[i].X*shapeScale,shape.Points[i].Y*shapeScale);
                        }
                        if(close){
                            ctx.closePath();
                        }
                        if(drawFill){
                            ctx.fill();
                        }
                        if(drawEdge){
                            ctx.stroke();
                        }
                    }
                }
            }
        </script>
    </head>
    <body onLoad="RunTests(); return false;">
        <canvas id="canvas" width="600" height="600"></canvas>
    </body>
</html>